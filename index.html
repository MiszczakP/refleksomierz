<html lang="pl">
<head>
    <meta charset="UTF-8"> 
    <title>Refleksomierz</title>
	
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, serif;
        }

        h1 {
            color: #0B3954;
        }

	.green {
		color:green;
	}
	.red {
          color: red;
        }
		
		
		
	.button-START {
	
}	

	.button-CLICK {
	background-color: green;
	padding: 100px;
	text-align: center;
	font-size: 100px;
	border: solid black;
	margin: 8px 10px;
}	


.hidden {display: none}

    </style>
</head>
<body>
<div>
<div id="app">
    
	<center><h1  id="main-header">Refleksomierzacz </h1></center> 
	<p>Witaj w grze, która sprawdza Twój refleks. Czy podejmiesz wyzwanie i sprawdzisz swój refleks?
	Jeżeli tak, to kliknij w poniższy przycisk START. Powodzenia :)	</p>
	<p> Twoje zadanie polegać będzie na jak najszybszym kliknięciu w prostokątne pole, zaraz po zmianie jego koloru. </p>
	<p>Grę możesz zakończyć w dowolnym momencie, poprzez naciśnięcie przycisku STOP.</p>
	<center> <button type="button" id="button-start" class="button-START" onclick="startGame()">START</button> </center>

</div>

<div id="click">

	<center> <button type="button" id="button-game" class="button-CLICK" > </button> </center>

</div>
 
 <div>
 <p>Statystyki:</p>
		
		<table id="statistic">
			<tr>
				<p> Ostatni czas reakcji [ms]:</p>
				<p id="current">0</p>
			</tr>
			<tr>
				<p> Najkrótszy czas reakcji [ms]:</p>
				<p id="minT">0</p>
			</tr>
						<tr>
				<p> Najdłuższy czas reakcji [ms]:</p>
				<p id="maxT">0</p>
			</tr>
						
		</table>
	
</div>

<script>


		let minT
		let maxT
		
		let changeNumber = 1;
		
	function startGame() {
	
		
		document.getElementById("button-start").setAttribute('onclick', "stopGame()");
		document.getElementById("button-start").innerText = "STOP";
		document.getElementById("button-start").className = "button-STOP";
		document.getElementById("button-game").classList = "button-CLICK";

		let randomDelay = (Math.floor(Math.random() * 10) + 1)*1000;	
		setTimeout(changeColor, randomDelay);

		const now = new Date();
		const timestampInMilliseconds = now.getTime();
		
		
		click.onclick = function () {
		
	
			const now2 = new Date();
			score = now2.getTime() - timestampInMilliseconds - randomDelay;
			score = Math.round(score);
			
			if (minT > score || !minT) {
			minT = score;
		}
		
		if (maxT < score || !maxT) {
			maxT = score;
		}
		
		
			let table = document.getElementById('statistic');							
			document.getElementById("current").innerHTML = score.toString();
			document.getElementById("minT").innerHTML = minT;
			document.getElementById("maxT").innerHTML = maxT;
	
			
		changeNumber++;
			
		if(changeNumber < 6){
			startGame();
		}
		else{
			endGame();
			changeNumber = 1;
			
		}
		
		}
	
	}
	function changeColor(){
		var randomColor = Math.floor(Math.random()*16777215).toString(16); //The number of colors from black to white = 16777216
		document.getElementById("button-game").style.background =  "#" + randomColor;
		
		document.getElementById("button-game").style.background =  "#" + randomColor;
		
		document.getElementById("button-game").style.background =  "#" + randomColor;
	}
	
	
	function stopGame() {
		document.getElementById("button-game").classList = "hidden";
		document.getElementById("button-start").setAttribute('onclick', "startGame()");
		document.getElementById("button-start").innerText = "START";
		document.getElementById("button-start").className = "button-START";	
		deleteValue();
	}
	
	
	function endGame(){
		document.getElementById("button-game").style.background.removeAttribute;
		document.getElementById("button-game").removeAttribute('onclick');

	
	}

	function deleteValue(){
		document.getElementById("current").innerHTML = 0;
		document.getElementById("minT").innerHTML = 0;
		document.getElementById("maxT").innerHTML = 0;
	
	}
	
	
	
	



</script>
</body>
</html>